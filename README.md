# PT_Assistant
to help people sign in on a PT website, pull torrents to their email automatically.

这个程序目前可以在windows及mac osx环境下运行，可以做到以下功能

1. 利用事先保存的cookie自动登录多个pt站，避免长时间不登录被删号
2. 自动签到得魔力
3. 自动搜索种子页面的免费种，根据事先设置的筛选条件（发布时间种子大小上传人数等）提取种子，发到指定的邮箱中

安装过程详细说明：

无论在mac osx，还是windows环境下运行，都是按先以下步骤操作：

1. 创建一个目录
2. 下载最新版本的源码到刚创建的目录
3. 为方便起见，先把刚下载的源码文件名里面的数字去掉，改为pt.py
4. 使用文本编辑器编辑两个地方：
  4.1. 编辑程序开始处PT_Sites这个结构，对于ourbits, hdhome, gztown, tvhome这四个站把自己的登录cookie加进去就行了，别的pt站没邀请进不去所以没测试，理论上应该无需改动，按注释填写内容即可
  4.2. 编辑程序结尾处的邮件服务器登录信息，改为自己的邮箱smtp服务器信息，用户名，及密码
5. 去python官网下载最新版的python3，安装到mac osx或windows10系统中
6. 在终端命令行方式，用pip下载第三方requests库，这两步不会的可以自己去百度，这里不细说
7. 安装完毕后还是在终端命令行状态确认一下能够进入python3，出现'>>>'提示符后，输入'import requests'命令，按回车键后未出现错误提示，能到这步说明python环境已经搭建成功
8. 输入‘exit()命令回车，退出python回到命令行

根据系统环境不同，接下来的操作过程也不相同，接下来我分别介绍windows，及mac osx环境的具体安装方法

mac osx：
9. 还是在终端命令行状态下，输入'python3 pt.py'回车，确定程序可以正常运行，因为程序里有随机休眠两分钟的设置，最长可能需要超过两分钟才能返回结果
10. 正常运行没有大段报错，说明前面的步骤都没问题了，如果有大段报错，请回到前面第一步仔细检查看有什么地方有疏漏
11. 执行sudo crontab -e，把下面第12步的这段写进去，其中python3的绝对路径可以用'which typhon3'确认，pt.py的绝对路径就是自己第一步创建的那个目录，ptx.log是存放运行错误日志的，路径及文件名可以自己起，或者不写也行
12. */6 * * * * /Library/Frameworks/Python.framework/Versions/3.6/bin/python3 /Users/Ben/python/pt.py >>/Users/Ben/python/ptx.log 2>&1
13. ':wq'保存退出，程序就可以运行起来了，进入程序目录，耐心等下次运行结束后，会创建pt.log文件，记录找到的种子以及签到得魔力信息，再次运行找到的种子会先跟log文件中的内容比对，新种子才发邮件。

windows：
9. 下载pt.bat到当前目录，还是在终端命令行状态下，输入'pt'回车，确定程序可以正常运行，因为程序里有随机休眠两分钟的设置，最长可能需要超过两分钟才能返回结果
10. 运行结束后，看是不是多了两个log文件，打开ptx.log看里面有没有大段报错，没有的话说明前面的步骤都没问题了，如果有大段报错，请回到前面第一步仔细检查看有什么地方有疏漏
11. 确认Task Scheduler服务运行起来了，再确认当前登录的windows用户是带密码的账户，这两点必须满足才能成功的加入任务计划
12. 进入任务计划程序，创建基本任务，起名后一路下一步，到启动程序这步，写入绝对路径让系统运行pt.bat批处理程序，勾选打开此任务的属性对话框后点完成
13. 进入属性设置里面，把程序设成每10分钟运行一次，程序就可以运行起来了，进入程序目录，耐心等下次运行结束后，会把运行信息写入ptx.log，新找到的种子以及签到得魔力信息会写入pt.log，找到种子后会先跟文件中的内容比对，新种子才发邮件。
